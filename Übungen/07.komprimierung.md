# Übungen zur Kompression unter Linux

## Vorbereitung

Folgende Kommandos werden für die Übungen benötigt:
```bash
dd
tar
gzip
bzip2
xz
time
```
1. Erstellt ein Verzeichnis `uebungen-kompression` für die Übungen und wechselt hinein.
2. Erstellt für die Übungen drei Testdateien mit dem Kommando `dd` wie folgt:
```bash
dd if=/dev/zero of=bigfile1.data bs=1M count=1024
dd if=/dev/zero of=bigfile2.data bs=1M count=1024
dd if=/dev/zero of=bigfile3.data bs=1M count=1024
```
**Erklärung:** `dd` liest hier von der Gerätedatei `/dev/zero/` 1024 Blöcke mit Nullbytes zu je 1MB ein und erstellt daraus die Datei `bigfile1.data` im aktuellen Verzeichnis.

### 1. Komprimieren einzelner Dateien ohne Tar
Verwendet `gzip`, `bzip2` und `xz`, um eine einzelne Datei direkt zu komprimieren. 
1. Komprimiert zuerst `bigfile1.data` mit `gzip`, dann `bigfile2.data` mit `bzip2` und `bigfile3.data` mit `xz`. Was fällt euch auf? Was ist mit den Originaldateien passiert? Schaut vielleicht in den Manpages mal nach der Option `-k`.
2. Messt mit dem Kommando `time` wie lange die einzelenen Komprimierungsalgorithmen zur Komprimierung.
```bash
time <kommando>
```
3. Wie gross sind die resultierenden Dateien? 
```bash
ls -lh <datei>
du -h <datei>
```
4. Was schliesst ihr daraus bezüglich der einzelenen Algorithmen?
5. Ist `xz` am langsamsten, also am "schlechtesten"? Oder solltet ihr euch vielleicht auch noch das Verhalten beim Dekomprimieren anschauen? Testet doch auch das mal mit dem Kommando `time`.
6. Mit welchem Hintergrund wurde also `xz` entwickelt? Es ist wie gesagt der neuste der drei Komprimierungsalgorithmen.
7. Löscht vor den anderen Übungen die komprimierten Dateien, so dass nur noch die drei unkomprimierten Dateien mit der Endung `.data` im Verzeichnis übrig bleiben.

### 2. Erstellen eines Tar-Archivs ohne Kompression
Erstellt nun ein Tar-Archiv `backup.tar`, das alle Dateien aus dem aktuellen Verzeichnis enthält, also `bigfile1.data`, `bigfile2.data` und `bigfile3.data`.

### 3. Erstellen eines komprimierten Tar-Archivs mit gzip
Erstellt ein gzip-komprimiertes Archiv `backup.tar.gz` aus dem aktuellen Verzeichnis und überprüfe die Dateigröße. Dazu könnt ihr natürlich das in Übung 2 erstellte Archiv einfach mit `gzip` komprimieren. Das sind aber zwei Schritte, die durchgeführt werden müssen. Vielleicht geht das ja auch in einem Schritt. Kann `tar` das etwa direkt? Sucht doch in der Manpage von `tar` mal nach dem Stichwort `Compression`.

### 4. Erstellen eines komprimierten Tar-Archivs mit bzip2
Erstellt ein bzip2-komprimiertes Archiv `backup.tar.bz2`, welches auch die drei `bigfile` Dateien enthalten soll in einem Rutsch mit `tar` und vergleicht die Dateigröße mit der gzip-Version.

### 5. Erstellen eines komprimierten Tar-Archivs mit xz
Erstellt nun auch ein zx-komprimiertes Archiv `backup.tar.xz`, welches auch die drei `bigfile` Dateien enthalten soll in einem Rutsch mit `tar` und vergleicht die Dateigröße mit der gzip- und der bzip2-Version.

### 6. Dekomprimieren der komprimierten Archive
Entpackt die einzelnen komprimierten Archive mit `tar` mit den jeweiligen Optionen und überprüft den Inhalt.

### 7. Fehlersuche: Doppelte Kompression
Was passiert, wenn ihr eine Datei mit `gzip` komprimierst und anschließend das komprimierte Ergebnis erneut mit `gzip` bearbeitest?

Was ist wenn ihr eine mit `gzip` komprimierte Datei mit z.B. `xz` komprimiert?

### 8. Falsche Dateiendung
Was passiert, wenn ihr eine Datei mit `bzip2` komprimierst, sie dann aber einfach mit `tar -xf` entpacken möchtet?

### 9. Entpacken ohne ursprüngliches Format zu kennen
Wie könnt ihr eine komprimierte Datei entpacken, ohne zu wissen, welches Kompressionsformat verwendet wurde? Es ist keine Dateiendung angegeben. Welches Kommando könnte hier hilfreich sein?

### 10. Versuch, ein Verzeichnis mit gzip, bzip2 oder xz zu komprimieren
Versucht, ein Verzeichnis direkt mit `gzip`, `bzip2` oder `xz` zu komprimieren, ohne `tar`. Funktioniert das? Warum bzw. warum nicht?

### 12. Komprimierung mit zip
Erstellt ein ZIP-Archiv `backup.zip`, das alle Dateien eines Verzeichnisses enthält (also z.B. alle `bigfile` Dateien). 

Wie unterscheidet sich das Verhalten von `zip` im Vergleich zu `tar` mit `gzip`? Ihr könnt auch hier die Kompressionsgeschwindigkeit und resultierende Dateigrösse vergleichen.

Hierzu müsst ihr `zip` aber erst einmal installieren: Als `root` mit `apt install zip`.

### 13. Komprimierungsalgorithmen 
Erstellt eine weitere Testdatei `bigfile_random.data` mit folgendem Kommando:
```bash
dd if=/dev/random of=bigfile_random.data bs=1M count=1024
```
Ihr verwendet hier die Gerätesdatei `/dev/random`. Diese produziert keine Nullbytes, sondern "Zufall".

Komprimiert diese Datei nun mit einem Algorithmus eurer Wahl oder auch mit allen drei. Was fällt euch auf? Was könnt ihr daraus über das generelle Vorgehen bzw. die Arbeitsweise eines Komprimierungsalgorithmus schliessen?
